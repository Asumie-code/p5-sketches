import{a as v}from"./chunk-2465R3FW.js";import{g as b}from"./chunk-7KJRK3NW.js";var l=b(v()),g=s=>{class n{constructor(e,t,h=null){this.count=0,this.len=5,this.pos=e,this.parent=h,this.dir=t,this.origDir=this.dir.copy()}next(){let e=s.createVector();l.default.Vector.mult(this.dir,this.len,e);let t=l.default.Vector.add(this.pos,e);return new n(t,this.dir.copy(),this)}show(){this.parent!=null&&(s.stroke(255),s.line(this.pos.x,this.pos.y,this.parent.pos.x,this.parent.pos.y))}rest(){this.dir=this.origDir.copy(),this.count=0}}class f{constructor(){this.pos=s.createVector(s.random(s.width),s.random(s.height-100)),this.reached=!1}show(){s.fill(255),s.noStroke(),s.ellipse(this.pos.x,this.pos.y,4,4)}}class u{constructor(){this.leaves=[],this.branches=[];let e=s.createVector(0,-1),t=new n(s.createVector(s.width/2,s.height),e);this.branches.push(t);for(let r=0;r<100;r++)this.leaves.push(new f);let h=!1,o=t,i=0;for(;!h&&i<1e3;){for(let r=0;r<this.leaves.length;r++){let d=l.default.Vector.dist(o.pos,this.leaves[r].pos);console.log(d),d<c&&(h=!0)}h||(o=o.next(),this.branches.push(o)),i++}}grow(){for(let e of this.leaves){let t=null,h=null,o=1e5;for(let i of this.branches){let r=l.default.Vector.dist(e.pos,i.pos);if(r<w){e.reached=!0,t=null;break}else r>c||(t==null||r<o)&&(t=i,o=r)}if(t!=null){let i=l.default.Vector.sub(e.pos,t.pos);i.normalize(),t.dir.add(i),t.count++}}for(let e=this.leaves.length-1;e>=0;e--)this.leaves[e].reached&&this.leaves.splice(e,1);for(let e=this.branches.length-1;e>=0;e--){let t=this.branches[e];t.count>0&&(t.dir.div(t.count),this.branches.push(t.next())),t.rest()}}show(){for(let e=0;e<this.leaves.length;e++)this.leaves[e].show();for(let e of this.branches)e.show()}}let a,c=100,w=10;s.setup=()=>{s.createCanvas(600,600).parent("sketch-holder"),a=new u},s.draw=()=>{s.background(51),a.show(),a.grow()}};export{g as sketch};
