import{a as v}from"./chunk-2465R3FW.js";import{g as b}from"./chunk-7KJRK3NW.js";var l=b(v()),g=t=>{class n{constructor(e,s,i=null){this.count=0,this.len=5,this.pos=e,this.parent=i,this.dir=s,this.origDir=this.dir.copy()}next(){let e=t.createVector();l.default.Vector.mult(this.dir,this.len,e);let s=l.default.Vector.add(this.pos,e);return new n(s,this.dir.copy(),this)}show(){this.parent!=null&&(t.stroke(255),t.line(this.pos.x,this.pos.y,this.parent.pos.x,this.parent.pos.y))}rest(){this.dir=this.origDir.copy(),this.count=0}}class f{constructor(){this.pos=t.createVector(t.random(t.width),t.random(t.height-100)),this.reached=!1}show(){t.fill(255),t.noStroke(),t.ellipse(this.pos.x,this.pos.y,4,4)}}class u{constructor(){this.leaves=[],this.branches=[];let e=t.createVector(0,-1),s=new n(t.createVector(t.width/2,t.height),e);this.branches.push(s);for(let r=0;r<100;r++)this.leaves.push(new f);let i=!1,o=s,h=0;for(;!i&&h<1e3;){for(let r=0;r<this.leaves.length;r++){let p=l.default.Vector.dist(o.pos,this.leaves[r].pos);console.log(p),p<c&&(i=!0)}i||(o=o.next(),this.branches.push(o)),h++}}grow(){for(let e of this.leaves){let s=null,i=null,o=1e5;for(let h of this.branches){let r=l.default.Vector.dist(e.pos,h.pos);if(r<w){e.reached=!0,s=null;break}else r>c||(s==null||r<o)&&(s=h,o=r)}if(s!=null){let h=l.default.Vector.sub(e.pos,s.pos);h.normalize(),s.dir.add(h),s.count++}}for(let e=this.leaves.length-1;e>=0;e--)this.leaves[e].reached&&this.leaves.splice(e,1);for(let e=this.branches.length-1;e>=0;e--){let s=this.branches[e];if(s.count>0){s.dir.div(s.count);let i=t.createVector(t.random(),t.random());i.setMag(.3),s.dir.add(i),this.branches.push(s.next())}s.rest()}}show(){for(let e=0;e<this.leaves.length;e++)this.leaves[e].show();for(let e of this.branches)e.show()}}let a,c=100,w=10;t.setup=()=>{t.createCanvas(600,600).parent("sketch-holder"),a=new u},t.draw=()=>{t.background(51),a.show(),a.grow()}};export{g as sketch};
